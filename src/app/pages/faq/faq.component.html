<div class="container mt-5 mb-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card">
        <div class="card-header">
          <h1 class="h2 mb-0">
            <i class="icon-line-question me-2"></i>
            {{ getTranslation('faq_title') }}
          </h1>
        </div>
        <div class="card-body">
          <div class="content">
            <p class="lead">
              {{ getTranslation('faq_intro_message') }}
            </p>

            <div class="mb-4">
              <input type="text" class="form-control" id="faqSearch" placeholder="{{ getTranslation('search_question') }}" 
                     onkeyup="filterFAQ(this.value)">
            </div>

            <h3><i class="icon-line-shopping-cart me-2"></i>{{ getTranslation('orders') }}</h3>
            
            <div class="accordion mb-4" id="ordersAccordion">
              <div class="accordion-item faq-item" data-keywords="encomenda pedido comprar como fazer">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#order1">
                    {{ getTranslation('how_to_order') }}
                  </button>
                </h2>
                <div id="order1" class="accordion-collapse collapse" data-bs-parent="#ordersAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('how_to_order_intro') }}</p>
                    <ol>
                      <li>{{ getTranslation('browse_products') }}</li>
                      <li>{{ getTranslation('add_to_cart') }}</li>
                      <li>{{ getTranslation('go_to_checkout') }}</li>
                      <li>{{ getTranslation('fill_shipping_payment') }}</li>
                      <li>{{ getTranslation('confirm_order') }}</li>
                    </ol>
                    <p>{{ getTranslation('confirmation_email_desc') }}</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item faq-item" data-keywords="cancelar encomenda anular pedido">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#order2">
                    {{ getTranslation('can_cancel_order') }}
                  </button>
                </h2>
                <div id="order2" class="accordion-collapse collapse" data-bs-parent="#ordersAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('cancel_order_timeframe') }}</p>
                    <p>{{ getTranslation('to_cancel') }}</p>
                    <ul>
                      <li>{{ getTranslation('contact_email_orders') }}</li>
                      <li>{{ getTranslation('phone_contact') }}</li>
                      <li>{{ getTranslation('include_order_number') }}</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="accordion-item faq-item" data-keywords="alterar modificar encomenda endereço morada">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#order3">
                    {{ getTranslation('can_change_address') }}
                  </button>
                </h2>
                <div id="order3" class="accordion-collapse collapse" data-bs-parent="#ordersAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('address_change_timeframe') }}</p>
                    <p>{{ getTranslation('contact_us_quickly') }}</p>
                    <ul>
                      <li>{{ getTranslation('shipping_email_contact') }}</li>
                      <li>{{ getTranslation('shipping_phone_contact') }}</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <h3><i class="icon-line-truck me-2"></i>{{ getTranslation('shipping_delivery') }}</h3>
            
            <div class="accordion mb-4" id="shippingAccordion">
              <div class="accordion-item faq-item" data-keywords="prazo entrega tempo envio demora">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#ship1">
                    {{ getTranslation('delivery_timeframe_question') }}
                  </button>
                </h2>
                <div id="ship1" class="accordion-collapse collapse" data-bs-parent="#shippingAccordion">
                  <div class="accordion-body">
                    <div class="table-responsive">
                      <table class="table table-sm">
                        <thead>
                          <tr>
                            <th>{{ getTranslation('destination') }}</th>
                            <th>{{ getTranslation('standard_shipping') }}</th>
                            <th>{{ getTranslation('express_shipping') }}</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>{{ getTranslation('portugal_mainland') }}</td>
                            <td>{{ getTranslation('standard_delivery_time') }}</td>
                            <td>{{ getTranslation('express_delivery_time') }}</td>
                          </tr>
                          <tr>
                            <td>{{ getTranslation('portuguese_islands') }}</td>
                            <td>{{ getTranslation('islands_standard_time') }}</td>
                            <td>{{ getTranslation('islands_express_time') }}</td>
                          </tr>
                          <tr>
                            <td>{{ getTranslation('spain') }}</td>
                            <td>{{ getTranslation('spain_standard_time') }}</td>
                            <td>{{ getTranslation('spain_express_time') }}</td>
                          </tr>
                          <tr>
                            <td>{{ getTranslation('european_union') }}</td>
                            <td>{{ getTranslation('eu_standard_time') }}</td>
                            <td>{{ getTranslation('eu_express_time') }}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>

              <div class="accordion-item faq-item" data-keywords="rastrear encomenda tracking seguimento">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#ship2">
                    {{ getTranslation('how_track_order') }}
                  </button>
                </h2>
                <div id="ship2" class="accordion-collapse collapse" data-bs-parent="#shippingAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('after_shipping_email') }}</p>
                    <ul>
                      <li>{{ getTranslation('tracking_code') }}</li>
                      <li>{{ getTranslation('direct_tracking_link') }}</li>
                      <li>{{ getTranslation('carrier_information') }}</li>
                    </ul>
                    <p>{{ getTranslation('check_account_orders') }}</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item faq-item" data-keywords="custo envio grátis portes taxa">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#ship3">
                    {{ getTranslation('shipping_cost_question') }}
                  </button>
                </h2>
                <div id="ship3" class="accordion-collapse collapse" data-bs-parent="#shippingAccordion">
                  <div class="accordion-body">
                    <div class="alert alert-success">
                      <strong>{{ getTranslation('free_shipping') }}</strong> {{ getTranslation('free_shipping_threshold') }}
                    </div>
                    <p><strong>{{ getTranslation('standard_shipping') }}:</strong> {{ getTranslation('standard_cost') }}</p>
                    <p><strong>{{ getTranslation('express_shipping') }}:</strong> {{ getTranslation('express_cost') }}</p>
                    <p>{{ getTranslation('international_cost_note') }}</p>
                  </div>
                </div>
              </div>
            </div>

            <h3><i class="icon-line-refresh me-2"></i>{{ getTranslation('returns_exchanges') }}</h3>
            
            <div class="accordion mb-4" id="returnsAccordion">
              <div class="accordion-item faq-item" data-keywords="devolver produto devolução prazo">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#return1">
                    {{ getTranslation('return_timeframe_question') }}
                  </button>
                </h2>
                <div id="return1" class="accordion-collapse collapse" data-bs-parent="#returnsAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('return_period_answer') }}</p>
                    <p><strong>{{ getTranslation('conditions') }}:</strong></p>
                    <ul>
                      <li>{{ getTranslation('original_condition') }}</li>
                      <li>{{ getTranslation('original_packaging') }}</li>
                      <li>{{ getTranslation('tags_attached') }}</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="accordion-item faq-item" data-keywords="trocar produto tamanho cor diferente">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#return2">
                    {{ getTranslation('can_exchange_size_color') }}
                  </button>
                </h2>
                <div id="return2" class="accordion-collapse collapse" data-bs-parent="#returnsAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('exchange_answer') }}</p>
                    <p><strong>{{ getTranslation('process') }}:</strong></p>
                    <ol>
                      <li>{{ getTranslation('contact_returns_email') }}</li>
                      <li>{{ getTranslation('send_original_back') }}</li>
                      <li>{{ getTranslation('send_new_product') }}</li>
                    </ol>
                    <p>{{ getTranslation('price_difference_note') }}</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item faq-item" data-keywords="reembolso dinheiro volta quanto tempo">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#return3">
                    {{ getTranslation('refund_time_question') }}
                  </button>
                </h2>
                <div id="return3" class="accordion-collapse collapse" data-bs-parent="#returnsAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('refund_processing_answer') }}</p>
                    <p>{{ getTranslation('original_payment_method') }}</p>
                    <p>{{ getTranslation('refund_email_confirmation') }}</p>
                  </div>
                </div>
              </div>
            </div>

            <h3><i class="icon-line-credit-card me-2"></i>{{ getTranslation('payments') }}</h3>
            
            <div class="accordion mb-4" id="paymentAccordion">
              <div class="accordion-item faq-item" data-keywords="métodos pagamento cartão visa mastercard multibanco">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#pay1">
                    {{ getTranslation('payment_methods_question') }}
                  </button>
                </h2>
                <div id="pay1" class="accordion-collapse collapse" data-bs-parent="#paymentAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('accepted_payment_methods') }}</p>
                    <ul>
                      <li><strong>{{ getTranslation('credit_debit_cards') }}:</strong> {{ getTranslation('card_brands') }}</li>
                      <li><strong>{{ getTranslation('multibanco') }}:</strong> {{ getTranslation('bank_transfer') }}</li>
                      <li><strong>{{ getTranslation('mb_way') }}</strong></li>
                      <li><strong>{{ getTranslation('paypal') }}</strong></li>
                    </ul>
                    <p>{{ getTranslation('secure_transactions') }}</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item faq-item" data-keywords="segurança dados cartão protecção ssl">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#pay2">
                    {{ getTranslation('payment_security_question') }}
                  </button>
                </h2>
                <div id="pay2" class="accordion-collapse collapse" data-bs-parent="#paymentAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('security_priority') }}</p>
                    <ul>
                      <li>{{ getTranslation('ssl_encryption') }}</li>
                      <li>{{ getTranslation('no_card_storage') }}</li>
                      <li>{{ getTranslation('secure_gateways') }}</li>
                      <li>{{ getTranslation('pci_certification') }}</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="accordion-item faq-item" data-keywords="fatura recibo documento fiscal">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#pay3">
                    {{ getTranslation('invoice_question') }}
                  </button>
                </h2>
                <div id="pay3" class="accordion-collapse collapse" data-bs-parent="#paymentAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('invoice_answer') }}</p>
                    <ul>
                      <li>{{ getTranslation('digital_invoice') }}</li>
                      <li>{{ getTranslation('valid_tax_document') }}</li>
                      <li>{{ getTranslation('paper_invoice_option') }}</li>
                    </ul>
                    <p>{{ getTranslation('business_invoice_note') }}</p>
                  </div>
                </div>
              </div>
            </div>

            <h3><i class="icon-line-user me-2"></i>{{ getTranslation('account_profile') }}</h3>
            
            <div class="accordion mb-4" id="accountAccordion">
              <div class="accordion-item faq-item" data-keywords="criar conta registo benefícios vantagens">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#acc1">
                    {{ getTranslation('need_account_question') }}
                  </button>
                </h2>
                <div id="acc1" class="accordion-collapse collapse" data-bs-parent="#accountAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('account_optional') }}</p>
                    <ul>
                      <li>{{ getTranslation('order_history') }}</li>
                      <li>{{ getTranslation('shipping_tracking') }}</li>
                      <li>{{ getTranslation('faster_checkout') }}</li>
                      <li>{{ getTranslation('exclusive_offers') }}</li>
                      <li>{{ getTranslation('wishlist') }}</li>
                    </ul>
                    <p>{{ getTranslation('free_registration') }}</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item faq-item" data-keywords="password senha esqueci recuperar login">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#acc2">
                    {{ getTranslation('forgot_password_question') }}
                  </button>
                </h2>
                <div id="acc2" class="accordion-collapse collapse" data-bs-parent="#accountAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('password_recovery_steps') }}</p>
                    <ol>
                      <li>{{ getTranslation('go_to_login') }}</li>
                      <li>{{ getTranslation('click_forgot_password') }}</li>
                      <li>{{ getTranslation('enter_email') }}</li>
                      <li>{{ getTranslation('receive_reset_link') }}</li>
                    </ol>
                    <p>{{ getTranslation('check_spam_folder') }}</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item faq-item" data-keywords="alterar dados pessoais email telefone morada">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#acc3">
                    {{ getTranslation('change_personal_data_question') }}
                  </button>
                </h2>
                <div id="acc3" class="accordion-collapse collapse" data-bs-parent="#accountAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('change_data_steps') }}</p>
                    <ol>
                      <li>{{ getTranslation('login_account') }}</li>
                      <li>{{ getTranslation('go_to_profile') }}</li>
                      <li>{{ getTranslation('click_edit_data') }}</li>
                      <li>{{ getTranslation('change_information') }}</li>
                      <li>{{ getTranslation('save_changes') }}</li>
                    </ol>
                  </div>
                </div>
              </div>
            </div>

            <h3><i class="icon-line-support me-2"></i>{{ getTranslation('products_stock') }}</h3>
            
            <div class="accordion mb-4" id="productAccordion">
              <div class="accordion-item faq-item" data-keywords="stock disponibilidade produto esgotado">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#prod1">
                    {{ getTranslation('out_of_stock_after_order') }}
                  </button>
                </h2>
                <div id="prod1" class="accordion-collapse collapse" data-bs-parent="#productAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('out_of_stock_answer') }}</p>
                    <ul>
                      <li>{{ getTranslation('immediate_contact') }}</li>
                      <li>{{ getTranslation('similar_upgrade_offer') }}</li>
                      <li>{{ getTranslation('wait_restock_option') }}</li>
                      <li>{{ getTranslation('cancel_full_refund') }}</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="accordion-item faq-item" data-keywords="garantia produto defeito assistência">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#prod2">
                    {{ getTranslation('product_warranties_question') }}
                  </button>
                </h2>
                <div id="prod2" class="accordion-collapse collapse" data-bs-parent="#productAccordion">
                  <div class="accordion-body">
                    <p>{{ getTranslation('all_products_have') }}</p>
                    <ul>
                      <li><strong>{{ getTranslation('legal_warranty') }}:</strong> {{ getTranslation('two_years_defects') }}</li>
                      <li><strong>{{ getTranslation('manufacturer_warranty') }}:</strong> {{ getTranslation('varies_by_product') }}</li>
                      <li><strong>{{ getTranslation('satisfaction_guarantee') }}:</strong> {{ getTranslation('fourteen_days_return') }}</li>
                    </ul>
                    <p>{{ getTranslation('warranty_contact_info') }}</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="alert alert-info">
              <h5><i class="icon-line-question-circle me-2"></i>{{ getTranslation('didnt_find_answer') }}</h5>
              <p class="mb-0">
                {{ getTranslation('contact_support_text') }}
                <a href="/customer-support" class="alert-link">{{ getTranslation('customer_support') }}</a> 
                {{ getTranslation('or_email') }} <strong>{{ getTranslation('support_email_address') }}</strong>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function filterFAQ(searchTerm) {
  const items = document.querySelectorAll('.faq-item');
  const term = searchTerm.toLowerCase();
  
  items.forEach(item => {
    const keywords = item.getAttribute('data-keywords').toLowerCase();
    const title = item.querySelector('.accordion-button').textContent.toLowerCase();
    
    if (keywords.includes(term) || title.includes(term) || term === '') {
      item.style.display = 'block';
    } else {
      item.style.display = 'none';
    }
  });
}
</script>
